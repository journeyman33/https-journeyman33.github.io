---
title:       "Week Four"
subtitle:    "Extra Credit"
description: ""
date:        "2024-03-06"
author:      "Charles Vosloo"
image:       ""
tags:        ["tag1", "tag2"]
categories:  ["Tech" ]
---
### Extra Credit
##### Three tasks were sugggested here:    
     
     

1. Package Everything in Helm
2. Implement Persistent Storage
3. Implement Basic CI/CD Pipeline  
4. <span style="color:green;">**Deploy Serverless options**</span> 
 
I have added the fourth. In the previous version of this challange one of the steps was to add a visitor counter to the website using the cloud provider's serverless function which would be AWS Lambda, Google Cloud Functions or Azure functions. I chose to do something similar **using non proprietary solutions.** On our ecommerce site additional features like email notifications, image procesing, payment processing, inventory managemnet or analytics could probably more easily be carried out using serverless or rather functions as a service.


How can one implemeent severless on civo cloud?
1. knative
2. OpenFaas

Civo is a dedicated kubernetes (k3s) cloud provider which embraces opensource CNCF products like OpenFaaS: a Function as a Service serverless framework that deploys event-driven functions and microservices to Kubernetes in the form of containers. 'Serverless' requires a server. It's only called serverless because when the function is called, from the perspective of the user, where and how the task is carried out is is unnoticed. So, how do we set up and manage an OpenFaas server which we control and own?

There are two ways to run OpenFaas:
1. faas-netes (on a kubernetes cluster)
![faas-netes](/img/of-workflow.png)
OpenFaas makes use of the PLONK stack. While the LAMP stack (linux, apache, mysql, php) is used by our ecommerce site, The JAM stack (javascript, API, markup) is used by this hugo blog, the PLONK stack is comprised of:  
>>Prometheus - metrics and time-series  
>>Linkerd - service mesh   
>>OpenFaaS - management and auto-scaling of compute - PaaS/FaaS   
>>NATS - asynchronous message bus / queue   
>>Kubernetes - declarative, extensible, scale-out, self-healing clustering    

2. faasd (on a VM running containderd)  
![faasd](/img/faasd-wf.png)

I, chose to run the faasd server On Prem on a raspberry pi, which is a faster and a more lightweight version of OpenFaas. This is procedure is explained in the creator, Alex Ellis's book, [Serverless for everyone else](https://openfaas.gumroad.com/l/serverless-for-everyone-else)

  
This setup has a single point of failure, so might be considered a proof of concept, but it works well, there are no cloud fees, and the raspberry pi address running on my local LAN, is routable externally thanks to the installation of inlets: 
![inlets](/img/inlets-concept.png)
















